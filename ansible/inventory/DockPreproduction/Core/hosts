####### Data pipeline ##########

[processing-cluster-kafka-1]
11.6.2.8

[processing-cluster-kafka:children]
processing-cluster-kafka-1

[processing-cluster-zookeepers-1]
11.6.2.8

[zookeeper:children]
processing-cluster-zookeepers-1

[yarn-master]
11.6.3.6

[yarn-slave]
11.6.3.7
11.6.3.8

[yarn:children]
yarn-master
yarn-slave

##########

[learning-neo4j-node1]  
11.6.2.10

[lp-cassandra]
11.6.2.15
11.6.2.16
11.6.2.17
#11.6.2.4 #old cassandra ip
#11.6.2.5 #old cassandra ip
#11.6.2.6 #old cassandra ip

[cassandra-ps:children]
lp-cassandra

[redis1]
11.6.3.5

[composite-search-cluster]
11.6.2.7

[sunbird-processing-cluster-kafka]
11.5.2.58 ansible_ssh_port=2200

#[dp-apilogstash-ps]
#11.5.3.8

#[logstash-ps:children]
#dp-apilogstash-ps

#[swarm-manager-1]
#11.5.1.6 swarm_master=true

#[swarm-manager:children]
#swarm-manager-1

#[swarm-node-1]
#11.5.0.11

#[swarm-node-2]
#11.5.0.12

#[swarm-worker:children]
#swarm-node-1
#swarm-node-2

[keycloak-1]
11.5.0.4

[keycloak-2]
11.5.0.15

[keycloak:children]
keycloak-1
keycloak-2

[log-es-2] 
11.6.2.9 node_name=log-es-2 es_instance_name=log-es-2 es_etc_node_master=true es_etc_node_data=true

[log-es:children]
log-es-2

[log-es-backup:children]
log-es-2

[lp-composite-ps]
11.6.2.7

[es-1] 
0.0.0.0 es_instance_name=cs-node es_etc_node_master=true es_etc_node_data=true

[es-backup:children]
es-1

[es:children]
es-1

[cassandra-1] 
11.6.2.15
#11.6.2.4

[swarm-dashboard-1]
0.0.0.0

[cassandra-2] 
11.6.2.16
#11.6.2.5

[cassandra-3] 
11.6.2.17
#11.6.2.6

[cassandra:children]
cassandra-1
cassandra-2
cassandra-3

[kafka-1]
11.6.2.8 kafka_id=1 

[telemetry-search-cluster-1]
11.6.2.8

[telemetry-search-cluster:children]
telemetry-search-cluster-1

[dp-influx-ps]
0.0.0.0

[kafka:children]
kafka-1

[local]
localhost

[jenkins-master]
localhost

[kong-api]
localhost

[local]
localhost ansible_connection=local cluster_name=Kubernetes-1

[lp-redis-ps]
11.6.3.5

[redis-ps:children]
lp-redis-ps

[dp-yarn-rm-ps]
11.6.3.6

[dp-yarn-slave-ps]
11.6.3.7
11.6.3.8

[lp-search-ps]
11.6.3.4

[lp-learning-ps]
11.6.3.5

[dp-secor-ps]
11.6.3.4

[mlworkbench]
11.6.3.9

[es7]
11.6.2.11 es_instance_name=es7 es_etc_node_master=true es_etc_node_data=true

[swarm-bootstrap-manager:children]
mlworkbench

[dp-cassandra]
11.6.2.15

[basic-monitor:children]
lp-redis-ps
cassandra-ps
es-ps
lp-neo4j-ps
processing-cluster-kafka
keycloak
yarn
lp-search-ps
lp-learning-ps
dp-influx-ps
dp-secor-ps

## monitor tomcat process
[tomcat-ps:children]
lp-learning-ps

## monitor serach process
[search-ps:children]
lp-search-ps

## monitor neo4j process
[neo4j-ps:children]
dp-neo4j-ps

## monitor elasticsearch process
[es-ps:children]
log-es
lp-composite-ps
es

## monitor yarn process
[yarn-rm-ps:children]
dp-yarn-rm-ps

[yarn-slave-ps:children]
dp-yarn-slave-ps

## monitor cassandra process
[cassandra-ps:children]
cassandra

## monitor logstash process  # learning, search, neo4j, kafkaindexer
[logstash-ps:children]
lp-learning-ps
lp-search-ps
lp-neo4j-ps

## monitor kafka process
[kafka-ps:children]
kafka

### monitor secor process
[secor-ps:children]
dp-secor-ps

## process exporter monitoring group
[process-exporter:children]
es-ps
yarn-ps
cassandra-ps
logstash-ps
kafka-ps
lp-search-ps
lp-learning-ps
lp-neo4j-ps
redis-ps
secor-ps
processing-cluster-zookeepers-1


## Add all VMs for basic monitoring
[node-exporter:children]
core
basic-monitor


#[log-forwarder:children]
#swarm-manager
##########################


[core:children]
log-es
cassandra
yarn
keycloak
swarm-bootstrap-manager
es7

[env:children]
postgres
core
# Moving kafka out of core because we don't need monitoring
kafka
local
es-ps
lp-search-ps
lp-learning-ps
lp-neo4j-ps
redis-ps

[all:vars]
cluster_name=Swarm2
ansible_ssh_user=deployer
ansible_ssh_private_key_file=/var/lib/jenkins/secrets/preproddeployer_ssh_key
logger_es6_host="{{ groups['log-es-2'][0] }}" #Move this to default all.yml after prod deploy

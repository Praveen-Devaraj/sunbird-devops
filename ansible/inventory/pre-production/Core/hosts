####### Data pipeline ##########

[processing-cluster-kafka-1]
11.5.2.58 ansible_ssh_port=2200

[processing-cluster-kafka:children]
processing-cluster-kafka-1

[processing-cluster-zookeepers-1]
11.5.2.58 ansible_ssh_port=2200

[zookeeper:children]
processing-cluster-zookeepers-1

[yarn-master]
11.5.3.14

[survey-sl]
11.5.3.38  mongo_backup_azure_container_name=mongodump-sikshalokam

[py-spark-sl]
11.5.3.37

[yarn-slave]
11.5.3.11
#11.5.3.12
11.5.3.5

[yarn:children]
yarn-master
yarn-slave

####################################
[learning-neo4j-node1]  
#11.5.2.6 
11.5.2.21

[redis1]
#lp-redis
#11.5.3.9
11.5.2.22

[lp-redis]
11.5.2.22

[dp-redis]
11.5.3.16 ansible_ssh_port=2200

[redis-nodebb]
#11.5.2.39

[redisall:children]
redis-nodebb
redis1

[dp-redis-ps]
11.5.3.18 ansible_ssh_port=2200

[lp-redis-ps]
11.5.2.22 ansible_ssh_port=2200

[redis-exporter-targets:children]
redis1
dp-redis

[redis-cluster:children]
redis-exporter-targets

[lp-cassandra]
11.5.2.16 #cassandra LP-core cluster
11.5.2.17 #cassandra LP-core cluster
11.5.2.18 #cassandra LP-core cluster
#11.5.2.4   #standalone server


[dp-cassandra]
11.5.2.4

[swarm-manager-1]
#11.5.1.6 swarm_master=true  

[swarm-manager:children]
swarm-manager-1

[swarm-node-1]
#11.5.0.11

[swarm-node-2]
#11.5.0.12       

[swarm-worker:children]
swarm-node-1
swarm-node-2

[aks-node-pool]
11.5.5.5
11.5.5.4

[process-exporter-prometheus:children]
basic-monitor
aks-node-pool

[redis-exporter-targets:children]
11.5.3.8
11.5.3.9

[keycloak-1]
11.5.0.6

[keycloak-2]
11.5.0.11

[keycloak:children]
keycloak-1
keycloak-2

[cassandra-backup]
#11.5.2.107

[es-backup]
#11.5.2.106

[log-es-2] 
11.5.0.13 node_name=log-es-2 es_instance_name=log-es-2 es_etc_node_master=true es_etc_node_data=true

[log-es-1]
11.5.0.8 node_name=log-es-1 es_instance_name=log-es-1 es_etc_node_master=true es_etc_node_data=true

[log-es:children]
#log-es-2
log-es-1

[graylog-1]
11.5.0.19 mongodb_master=True graylog_is_master=True

[graylog:children]
graylog-1

[swarm-agent-for-prometheus-1] 
#11.5.0.11

[swarm-agent-for-prometheus:children]
swarm-agent-for-prometheus-1

[swarm-agent-for-prometheus-stateful:children]
swarm-agent-dashboard

[alertmanager_stateful:children]
swarm-agent-dashboard

[alertmanager]
#11.5.1.6

[swarm-dashboard-1]
#11.5.3.19

[swarm-dashboard:children]
swarm-dashboard-1

[swarm-agent-dashboard-1]
#11.5.3.19

[swarm-agent-dashboard:children]
swarm-agent-dashboard-1

[swarm-agent-for-alertmanager-1] 
#11.5.0.12

[es-1] 
11.5.2.13 es_instance_name=cs-node-1 es_etc_node_master=true es_etc_node_data=true

[es-backup:children]
es-1

[log-es-backup:children]
log-es-2

[es:children]
es-1

#[cassandra-1] #commenting temporiry
#11.5.2.5   #standalone cassandra machine

[cassandra-1]  #temp-definishion
11.5.2.16

[cassandra-2]
11.5.2.17

[cassandra-3]
11.5.2.18

[cassandra-4]
11.5.2.19

[cassandra:children]
cassandra-1 
cassandra-2 
cassandra-3 
cassandra-4

[composite-search-cluster]
11.5.2.7 #current used IP

[es-restore]
#11.5.2.94
#11.5.2.95
#11.5.2.96

[raw-coordinator]
11.5.2.10

[ingestion-cluster-kafka]
11.5.2.58 ansible_ssh_port=2200

[ingestion-cluster-zookeeper]
11.5.2.58 ansible_ssh_port=2200

#[postgresql-master-1] 
#kong-lms-keycloak-preprod-new.postgres.database.azure.com

#[postgresql-master:children]
#postgresql-master-1

#[postgresql-slave-1] 
#kong-lms-keycloak-preprod-new.postgres.database.azure.com

#[postgresql-slave:children]
#postgresql-slave-1

#[postgres:children]
#postgresql-slave
#postgresql-master

#[mongo_master]
#11.5.2.93 mongodb_master=True mongo_backup_azure_container_name=mongodump-discussions

[mongo_master]
11.5.3.38

[ml-analytics-service]
11.5.3.20 ansible_ssh_port=2200

[es7]
11.5.2.13

[sl-druid]
11.5.2.10

#[mongo_replicas] #add ip in case replicaSet

[mongo:children]
mongo_master
#mongo_replicas

[mongodb-backup:children]
mongo_master
survey-sl

[kafka-1]
11.5.2.58 kafka_id=1 ansible_ssh_port=2200

[telemetry-search-cluster-1]
11.5.2.7

[telemetry-search-cluster:children]
telemetry-search-cluster-1

[kafka:children]
kafka-1

[local]
localhost ansible_connection=local

[jenkins-master]
localhost

[preprod-k8s-bastion]
11.5.3.36

[swarm-agent-for-alertmanager:children]
swarm-agent-for-alertmanager-1

[kong-api]
localhost

[swarm-bootstrap-manager:children]
swarm-manager

[swarm-nodes:children]
swarm-manager
swarm-bootstrap-manager
swarm-agent-for-prometheus
swarm-agent-for-alertmanager

[raw-broker]
11.5.2.10

[learning1]
11.5.3.27 ansible_ssh_port=2200

[learningall:children]
learning1

########################################################### Monitoring ########################################

[redis1-ps:children]
redis1

[lp-neo4j-ps]
#11.5.2.6
11.5.2.21

[dp-druid-ps]
11.5.2.10

[dp-superset-ps]
11.5.2.10

[dp-analytics-ps]
11.5.3.18 ansible_ssh_port=2200

[dp-yarn-rm-ps]
11.5.3.14

[dp-yarn-slave-ps]
11.5.3.11
#11.5.3.12
11.5.3.4
11.5.3.5
11.5.3.6

[cassandra-test-cluster]
#11.5.2.85                     
##11.5.2.86                     
#11.5.2.87                    
#11.5.2.88                     
#11.5.2.89                     
#11.5.2.90                    
#11.5.2.91 
#11.5.2.100
11.5.3.4

[test-cluster]
#11.5.2.40
#11.5.2.41
#11.5.2.42
11.5.2.51
11.5.2.52
11.5.2.53
11.5.2.54
11.5.2.55
11.5.2.56
#11.5.2.57
#11.5.2.75
#11.5.2.76
#11.5.2.77
#11.5.2.100

[cassandra-dry-run]
#11.5.2.108
#11.5.2.109
#11.5.2.110
#11.5.2.111
#11.5.2.112
#11.5.2.113
#11.5.2.114

[mock-servers]
#11.5.2.44
#11.5.2.45
11.5.2.46
11.5.2.47

[lp-composite-ps]
11.5.2.7

[dp-spark-ps]
11.5.3.13

[lp-search-ps]
11.5.3.15

[lp-learning-ps]
11.5.3.27 ansible_ssh_port=2200

[dp-cassandra-ps:children]
dp-cassandra

[cassandra-ps:children]
dp-cassandra-ps

[dp-apilogstash-ps]
11.5.3.18 ansible_ssh_port=2200

[diksha-docs]
10.9.0.5

[sunbird-rc]
#10.10.0.4
10.10.0.5

[logstash-ps:children]
dp-apilogstash-ps

[basic-monitor:children]
es
log-es
lp-neo4j-ps
dp-druid-ps
processing-cluster-kafka
keycloak
yarn
dp-spark-ps
dp-analytics-ps
lp-search-ps
lp-learning-ps
kafka-ps
zookeeper-ps
test-cluster
mock-servers
redis-ps
cassandra-test-cluster
mongo
survey-sl
py-spark-sl
es-backup
graylog

# monitor tomcat process
[tomcat-ps:children]
lp-learning-ps

# monitor serach process
[search-ps:children]
lp-search-ps

# monitor neo4j process
[neo4j-ps:children]
dp-neo4j-ps

# monitor elasticsearch process
[es-ps:children]
log-es
lp-composite-ps
es
#es-restore

# monitor yarn process
[yarn-rm-ps:children]
dp-yarn-rm-ps

[yarn-slave-ps:children]
dp-yarn-slave-ps

# monitor cassandra process
[cassandra-ps:children]
cassandra

# monitor logstash process  # learning, search, neo4j, kafkaindexer
[logstash-ps:children]
lp-learning-ps
lp-search-ps
lp-neo4j-ps
dp-kafkaindexer-ps

# monitor analytics process
[analytics-ps:children]
dp-analytics-ps

# monitor kafka process
[kafka-ps:children]
dp-kafka-ps
flink-processing-cluster-kafka

[flink-processing-cluster-kafka]
11.5.2.23 
11.5.2.24 
11.5.2.25 

# monitoring zookeeper process
[zookeeper-ps:children]
flink-processing-cluster-zookeepers

[flink-processing-cluster-zookeepers]
11.5.2.23 
11.5.2.24 
11.5.2.25

[processing-cluster-zookeepers:children]
flink-processing-cluster-zookeepers

# monitor druid process
[druid-zookeeper-ps:children]
dp-druid-ps

# monitor postgres process
[druid-postgres-ps:children]
dp-druid-ps

# monitor overlord process
[overlord-ps:children]
dp-druid-ps

# monitor coordinator process
[coordinator-ps:children]
dp-druid-ps

# monitor historical process
[historical-ps:children]
dp-druid-ps

# monitor druid graphite process
[druid-graphite-ps:children] # check once
dp-druid-ps

# monitor druid broker process
[broker-ps:children]
dp-druid-ps

# monitor middlemanager process
[middlemanager-ps:children]
dp-druid-ps

[redis-ps:children]
redisall

[l1supporttool]
10.5.0.4

# process exporter monitoring group
[process-exporter:children]
es-ps
yarn-ps
cassandra-ps
logstash-ps
analytics-ps
kafka-ps
druid-zookeeper-ps
druid-postgres-ps
overlord-ps
coordinator-ps
historical-ps
druid-graphite-ps
broker-ps
middlemanager-ps
zookeeper-ps
redis-ps

# Add all VMs for basic monitoring
[node-exporter:children]
core
basic-monitor


###########################################################

[core:children]
es
log-es
cassandra
swarm-nodes
swarm-manager
keycloak
swarm-dashboard
swarm-agent-dashboard
process-exporter
raw-coordinator
ingestion-cluster-kafka
ingestion-cluster-zookeeper
test-cluster
mock-servers
redisall
mongo
survey-sl
py-spark-sl
#es-restore
#cassandra-backup
es-backup
ml-analytics-service
sl-druid
redis-cluster

[env:children]
postgres
core
# Moving kafka out of core because we don't need monitoring
kafka
local
node-exporter
log-es-2
cassandra-test-cluster
mongodb-backup
es7

[log-forwarder:children]
swarm-manager

[all:vars]
cluster_name=Swarm2
ansible_ssh_user=deployer
ansible_ssh_private_key_file=/var/lib/jenkins/secrets/preproddeployer_ssh_key
monitor_stateful=1
logger_es6_host="{{ groups['log-es-2'][0] }}" #Move this to default all.yml after prod deploy

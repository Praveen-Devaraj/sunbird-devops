####### Data pipeline ##########

[processing-cluster-kafka-1]
11.5.3.7

[processing-cluster-kafka:children]
processing-cluster-kafka-1

[processing-cluster-zookeepers-1]
11.5.3.7

[zookeeper:children]
processing-cluster-zookeepers-1

[yarn-master]
11.5.3.14

[yarn-slave]
11.5.3.11
11.5.3.5
11.5.3.12
11.5.3.4
11.5.3.6

[yarn:children]
yarn-master
yarn-slave

####################################
[learning-neo4j-node1]  
11.5.2.6 

[lp-redis]
11.5.3.9

[lp-cassandra]
11.5.2.4

[dp-cassandra]
11.5.2.4

[swarm-manager-1]
11.5.1.8 swarm_master=true  ###11.5.1.5


[swarm-manager:children]
swarm-manager-1

[swarm-node-1]
11.5.0.16  ###11.5.0.5

[swarm-node-2]
11.5.0.17           ####11.5.0.6

[swarm-worker:children]
swarm-node-1
swarm-node-2

[keycloak-1]
11.5.0.4

[keycloak-2]
11.5.0.15

[keycloak:children]
keycloak-1
keycloak-2


#[log-es-1] 
#11.5.2.8 node_name=refactor-log-es-1 es_etc_node_master=true es_etc_node_data=true 

[log-es-2] 
11.5.0.13 node_name=log-es-2 es_instance_name=log-es-2 es_etc_node_master=true es_etc_node_data=true

[log-es:children]
log-es-2

[swarm-agent-for-prometheus-1] 
11.5.0.16


[swarm-agent-for-prometheus:children]
swarm-agent-for-prometheus-1

[swarm-agent-for-prometheus-stateful:children]
swarm-agent-dashboard

[alertmanager_stateful:children]
swarm-agent-dashboard

[alertmanager]
11.5.1.5
11.5.1.6

[swarm-dashboard-1]
11.5.3.19

[swarm-dashboard:children]
swarm-dashboard-1

[swarm-agent-dashboard-1]
11.5.3.19

[swarm-agent-dashboard:children]
swarm-agent-dashboard-1

[swarm-agent-for-alertmanager-1] 
11.5.0.17


[es-1] 
11.5.2.13 es_instance_name=cs-node-1 es_etc_node_master=true es_etc_node_data=true

[es-backup:children]
es-1

[log-es-backup:children]
log-es-2

[es:children]
es-1

[cassandra-1] 
11.5.2.5

[cassandra:children]
cassandra-1

[postgresql-master-1] 
stagingall.postgres.database.azure.com

[postgresql-master:children]
postgresql-master-1

[postgresql-slave-1] 
stagingall.postgres.database.azure.com

[postgresql-slave:children]
postgresql-slave-1

[postgres:children]
postgresql-slave
postgresql-master

[kafka-1]
11.5.3.7 kafka_id=1 

[telemetry-search-cluster-1]
11.5.2.7

[telemetry-search-cluster:children]
telemetry-search-cluster-1

[kafka:children]
kafka-1

[local]
localhost ansible_connection=local

[jenkins-master]
localhost

[swarm-agent-for-alertmanager:children]
swarm-agent-for-alertmanager-1

[kong-api]
localhost

[swarm-bootstrap-manager:children]
swarm-manager

[swarm-nodes:children]
swarm-manager
swarm-bootstrap-manager
swarm-agent-for-prometheus
swarm-agent-for-alertmanager

########################################################### Monitoring ########################################

[lp-redis-ps:children]
lp-redis

[lp-neo4j-ps]
11.5.2.6

[dp-influx-ps]
11.5.3.10

[dp-druid-ps]
11.5.2.10

[dp-superset-ps]
11.5.2.10

[dp-analytics-ps]
11.5.3.8

[dp-yarn-rm-ps]
11.5.3.14

[dp-yarn-slave-ps]
11.5.3.11
11.5.3.12
11.5.3.4
11.5.3.5
11.5.3.6

[lp-composite-ps]
11.5.2.7

[dp-secor-ps]
11.5.3.10

[dp-spark-ps]
11.5.3.13

[dp-kafkaindexer-ps]
11.5.3.10

[lp-search-ps]
11.5.3.15

[lp-learning-ps]
11.5.3.9

[dp-cassandra-ps:children]
dp-cassandra

[cassandra-ps:children]
dp-cassandra-ps

[dp-apilogstash-ps]
11.5.3.8

[logstash-ps:children]
dp-apilogstash-ps

[basic-monitor:children]
swarm-manager
swarm-worker
lp-redis-ps
cassandra
es
log-es
lp-neo4j-ps
dp-influx-ps
swarm-dashboard
dp-druid-ps
processing-cluster-kafka
keycloak
yarn
dp-secor-ps
dp-spark-ps
dp-analytics-ps
lp-search-ps
lp-learning-ps

# monitor tomcat process
[tomcat-ps:children]
lp-learning-ps

# monitor serach process
[search-ps:children]
lp-search-ps

# monitor neo4j process
[neo4j-ps:children]
dp-neo4j-ps

# monitor elasticsearch process
[es-ps:children]
log-es
lp-composite-ps
es

# monitor yarn process
[yarn-rm-ps:children]
dp-yarn-rm-ps

[yarn-slave-ps:children]
dp-yarn-slave-ps

# monitor cassandra process
[cassandra-ps:children]
cassandra

# monitor logstash process  # learning, search, neo4j, kafkaindexer
[logstash-ps:children]
lp-learning-ps
lp-search-ps
lp-neo4j-ps
dp-kafkaindexer-ps

# monitor secor process
[secor-ps:children]
dp-secor-ps

# monitor analytics process
[analytics-ps:children]
dp-analytics-ps

# monitor kafka process
[kafka-ps:children]
dp-kafka-ps

# monitor druid process
[druid-zookeeper-ps:children]
dp-druid-ps

# monitor postgres process
[druid-postgres-ps:children]
dp-druid-ps

# monitor overlord process
[overlord-ps:children]
dp-druid-ps

# monitor coordinator process
[coordinator-ps:children]
dp-druid-ps

# monitor historical process
[historical-ps:children]
dp-druid-ps

# monitor druid graphite process
[druid-graphite-ps:children] # check once
dp-druid-ps

# monitor druid broker process
[broker-ps:children]
dp-druid-ps

# monitor middlemanager process
[middlemanager-ps:children]
dp-druid-ps

# process exporter monitoring group
[process-exporter:children]
es-ps
yarn-ps
cassandra-ps
logstash-ps
secor-ps
analytics-ps
kafka-ps
druid-zookeeper-ps
druid-postgres-ps
overlord-ps
coordinator-ps
historical-ps
druid-graphite-ps
broker-ps
middlemanager-ps

# Add all VMs for basic monitoring
[node-exporter:children]
core
basic-monitor


###########################################################

[core:children]
es
log-es
cassandra
swarm-nodes
swarm-manager
keycloak
swarm-dashboard
swarm-agent-dashboard
process-exporter

[env:children]
postgres
core
# Moving kafka out of core because we don't need monitoring
kafka
local
node-exporter
log-es-2

[log-forwarder:children]
swarm-manager

[all:vars]
cluster_name=Swarm1
ansible_ssh_user=deployer
ansible_ssh_private_key_file=/var/lib/jenkins/secrets/preproddeployer_ssh_key
monitor_stateful=1
logger_es6_host="{{ groups['log-es-2'][0] }}" #Move this to default all.yml after prod deploy


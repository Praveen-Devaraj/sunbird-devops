#!/bin/bash
# Title: Configuring Consumtion FAQs
# Description: Technical document on configuring consumption FAQs
# Note: Dependencies Install jq before running this script

sunbirdBaseURL="https://diksha.gov.in"
Bearer="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJiY2U4ZWI2OTA3Yjg0NmRjOTY5ZDM5YjczNDczYzVjMSJ9.rkb7wYQYd_5mXtSoJvc_0p4MXjpOZOeO-rP51k_DIg0"
ssoUser="ntp-prod-new-admin"
ssoPassword="fcV[2fQUJ'"
consumptionFaqsPublicUrl="https://diksha.gov.in/faq/consumption-faqs.html" # This value need to be taken from implementation team tomorrow
authToken=$(curl -s -X POST $sunbirdBaseURL/auth/realms/sunbird/protocol/openid-connect/token -H 'cache-control: no-cache' -H 'content-type: application/x-www-form-urlencoded' -H 'postman-token: 15d3852b-de08-ea78-3342-bfaf5d4d4f09' --data "client_id=admin-cli&username=$ssoUser&password=$ssoPassword&grant_type=password" | jq -r '.access_token')
rootOrgIds=(012455867699322880659 01259546259641958410 012361885070827520110898 01259891801536921611 01260953231038054415 01241973835945574420 01260243155748454421 0123222323365888007947 01232498311112294442 01246375399411712074 01239924551496499224 0125239475659653121 0126202691023585280 012455843650453504710 012593397993308160261 01254592085869363222 0124303665008312323 0126238017036288004 0125747585442037766 01246376237871104093 0123221617357783046602 01232497686555033641 01232495590744883232 012390204825944064127 01248358927420620836 0126087586736619522 01241974041332940818 01248978648941363234 0123221758376673287017 012746055377788928130 012758273392336896255 012582683533344768108 01254290140407398431 012440393978757120111 01250118703801958439 01261732844414566415 01263495127545446466 01232560272932864010 0123222842753187849082 0123229022863196160 012361896255012864110919 012390210613329920129 01238592957888921646 01265700078117683229 01249064213827584055 01261723045552947233 01232497910127820843 0123249244914974727 01265770253221888087 01270356210234163235 012756162019516416333 01260971851934924813 01263350230999859261 01241973795750707285 01249974230922854421 0123852110959083520 0126002713272729607 0125805318613565447 012361897427730432110908 01241408242723225614 01254298042912768026 012466472914190336123 0123853313653391368 01256272239030272080 01260242422044262448 012585437685645312268 01259955628967526418 01254300593258496026 012585429003968512109 0125196274181898243 01257280950159769620 012584868382023680262 0126830867681034247 0126640793823641603 0125804158162452485 ORG_001 0126684405014528002 0123222401782661128101 0123313868379340800 012424880506855424168 0123207707019919361056 01272640641486848010205 01235953109336064029450)

echo -e "The Auth Token is $authToken\n"
### Coming Soon Page Setting

for rootOrgId in ${rootOrgIds[@]};
do
	curl -X POST \
	  $sunbirdBaseURL/api/data/v1/system/settings/set \
	  -H "Authorization: Bearer $Bearer" \
	  -H 'Content-Type: application/json' \
	  -H "X-Authenticated-User-Token: $authToken" \
	  -d '{
	  "request": {
		"id": "contentComingSoonMsg",
		"field": "contentComingSoonMsg",
		"value": "[{\"rootOrgId\":\"'"$rootOrgId"'\",\"value\":\"Org specific coming soon message\",\"translations\":\"{\\\"en\\\":\\\"Coming soon message\\\"}\"},{\"rootOrgId\":\"'"$rootOrgId"'\",\"value\":\"Org specific coming soon message\",\"translations\":\"{\\\"en\\\":\\\"Coming soon message\\\"}\"}]"
	    }
	}' 
done
###

curl -X GET \
  $sunbirdBaseURL/api/data/v1/system/settings/get/contentComingSoonMsg \
  -H "Authorization: Bearer $Bearer" \
  -H 'Content-Type: application/json'

####
